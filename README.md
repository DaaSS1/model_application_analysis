# README — Анализ поведения пользователей мобильного приложения

**Проект:** анализ логов мобильного приложения (стартап, продающий продукты питания). Документ составлен по содержимому ноутбука `modile_application_analysis.ipynb`.

---

## Краткое описание

Анализ направлен на исследование пользовательской воронки продаж и на проверку результатов A/A/B-эксперимента, в котором участвовали 3 группы (две контрольные и одна экспериментальная). Цели:

* понять, на каких шагах теряются пользователи;
* посчитать ключевые метрики воронки (доли, конверсии между шагами);
* провести статистическую проверку различий между группами (с поправкой на множественные сравнения).

---

## Данные

**Файл:** `/datasets/logs_exp.csv` (логи событий). Формат: табличный (TSV). После подгрузки столбцы были переименованы и расширены:

Колонки (после приведения к snake_case):

* `event_name` — название события (например, `MainScreenAppear`, `OffersScreenAppear`, `CartScreenAppear`, `PaymentScreenSuccessful`, `Tutorial` и др.)
* `user_id` — идентификатор пользователя
* `unix_time` — время события в unix-формате
* `event_time` — время события в `Timestamp` (добавлено в процессе предобработки)
* `event_date` — дата события (добавлено в процессе предобработки)
* `exp_id` — id экспериментальной группы (например, 246, 247, 248)

**Период данных:** минимальное время события — `2019-07-25 04:43:36`, максимальное — `2019-08-07 21:15:17`.

**Короткие метрики (после первичной предобработки):**

* всего событий в логе: **243713**
* уникальных пользователей: **7551**
* среднее число событий на пользователя: **32**
* медиана числа событий на пользователя: ~**20** (после исключения очевидных выбросов медиана уменьшалась до 19)
* удалено явных дубликатов: **413**
* пользователи, оказавшиеся в нескольких группах: **не обнаружены** (атрибуция корректна)

---

## Предобработка

Ключевые шаги:

1. Переименование столбцов в `snake_case`.
2. Добавление `event_time` и `event_date` (человеко-читаемые форматы времени/даты).
3. Проверка на пропуски и дубликаты — пропусков не обнаружено, убрано 413 явных дупликатов.
4. Построение распределения числа событий на пользователя; определение границы для выбросов — верхняя граница взята на уровне 100 событий (для отдельных визуализаций использовались и более жесткие отсечки: 250 и т.д.).
5. Исключение периода с «догоняющими» событиями — в дальнейшем анализ проводился на данных после `2019-07-31` (чтобы не учитывать события, «доезжавшие» в начало периода).
6. Исключение вспомогательного этапа `Tutorial` из анализа воронки (не является частью основной воронки).

---

## Описательная часть / EDA

* Большинство пользователей совершают относительно небольшое число событий; распределение тяжёлое справа (есть выбросы).
* Выбранные пороги и описательные статистики: медиана ~20, IQR и 3-й квартиль ~34–37 (в зависимости от отсечения выбросов).

---

## Воронка продаж

**Выделенные этапы воронки (в порядке):**

1. `MainScreenAppear`
2. `OffersScreenAppear`
3. `CartScreenAppear`
4. `PaymentScreenSuccessful`

**Как считали:**

* для каждого этапа считаем число уникальных юзеров, совершивших событие в отфильтрованной временной выборке;
* рассчитываем долю (share) — % от всех пользователей выборки;
* рассчитываем конверсии между последовательными шагами (в %), где для первого шага `cr = 100%`.

**Ключевые наблюдения:**

* Самая большая потеря пользователей происходит на этапе `OffersScreenAppear` — порядка **62%** (падение относительно предыдущего шага).
* Конверсия в покупку (на уровне рассматриваемой воронки) составила около **47.7%** (имеется в виду конверсия между соответствующими шагами — в ноутбуке это рассчитано как % перехода между конкретными этапами).

(В ноутбуке построены визуализации воронки: общая воронка и отдельные воронки по экспериментальным группам.)

---

## A/A/B эксперимент — статистическая проверка

**Описание эксперимента:**

* Три группы пользователей: `246`, `247` (контрольные), `248` (экспериментальная).
* Для каждой пары групп и каждого этапа воронки выполнялись попарные проверки различий конверсий.

**Метод:**

* Для каждой пары групп рассчитывается конверсия в текущий этап и применяется Z-тест для разницы пропорций (ручная реализация через `norm.cdf`).
* Учитывается поправка на множественные сравнения (Sidak). Исходный уровень значимости `alpha = 0.05`, число парных сравнений — `m = 16` → скорректированный уровень (`shidak_alpha`) ≈ **0.0032**.

**Результат:**

* Для всех проверенных пар и этапов p-value оказались больше скорректированного уровня значимости (в ноутбуке в примерах для `MainScreenAppear` p-values: 0.7571, 0.2942, 0.295 и т.д.).
* Вывод: **статистически значимых различий между контрольными и экспериментальной группой по показателям конверсии в этапах воронки не обнаружено** при применении выбранной поправки на множественные сравнения.

---

## Выводы и рекомендации

**Ключевые выводы:**

* Данные успешно предобработаны: пропусков нет, 413 дубликатов удалено, пользователи корректно атрибутированы по группам.
* Период анализа ограничен интервалом после `2019-07-31`, чтобы исключить эффект «доезжающих» событий.
* Медиана активности пользователя по событиям ≈ **20**; среднее — **32** события на пользователя (есть редкие «шумные» пользователи — выбросы).
* Воронка состоит из четырёх ключевых шагов; наибольшая потеря пользователей — на `OffersScreenAppear` (≈62% от предыдущего шага).
* Конверсия в покупку (в пределах выбранной логики расчёта) около **47.7%**.
* A/A/B тест показал отсутствие статистически значимых различий между группами после коррекции на множественные сравнения.

**Рекомендации для бизнеса / аналитики:**

1. Сфокусироваться на улучшении этапа `OffersScreenAppear` — провести качественные исследования (UX-тесты, записи сессий, A/B тесты с вариантами контента/промо на этом экране).
2. Убедиться, что метрики четко определены: какая именно конверсия является ключевой (всё приложение, активные пользователи, пользователи, дошедшие до офферов и т.д.).
3. Для будущих A/B-тестов заранее определить мощность теста (sample size) для ожидаемого эффекта и использовать корректировки на множественные сравнения, если будет множественность гипотез.
4. Рассмотреть сегментацию пользователей (по устройству, гео, источнику трафика) — возможно эффект проявляется в подгруппах.
5. Если в эксперименте ожидается небольшая разница — увеличить длительность/выборку эксперимента.

---

## Репликация / как запустить

**Требования:** Python 3.x, библиотеки (указаны в ноутбуке): `pandas`, `numpy`, `matplotlib`, `plotly`, `scipy` и др.

**Сценарий запуска:**

1. Открыть `modile_application_analysis.ipynb` в Jupyter/Colab.
2. Убедиться, что файл `logs_exp.csv` доступен по пути `/datasets/logs_exp.csv` или скорректировать путь в ячейке чтения.
3. Запускать ячейки последовательно — ноутбук содержит шаги предобработки, EDA, построения воронки и статистической проверки.

---

## Файлы в репозитории

* `modile_application_analysis.ipynb` — сам анализ (ноутбук).
* `/datasets/logs_exp.csv` — исходный лог (не добавлен в репозиторий по причинам приватности/веса).

---

## Возможные улучшения ноутбука

* Добавить автоматизированный модуль для расчёта мощности теста и генерацию рекомендации по sample size.
* Сделать функции/модули для повторного использования (preprocess(), build_funnel(), test_groups()).
* Сохранение итоговых таблиц (funnel, grouped_df2, результаты тестов) в csv для дальнейшего использования.

---

